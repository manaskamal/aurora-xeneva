; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.1 

include listing.inc

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?initialize_event_shared@@YAXXZ			; initialize_event_shared
PUBLIC	?event_shared_push_data@@YAXU_mail_@@@Z		; event_shared_push_data
EXTRN	?pmmngr_alloc@@YAPEAXXZ:PROC			; pmmngr_alloc
EXTRN	?map_page@@YA_N_K0@Z:PROC			; map_page
pdata	SEGMENT
$pdata$?initialize_event_shared@@YAXXZ DD imagerel $LN3
	DD	imagerel $LN3+39
	DD	imagerel $unwind$?initialize_event_shared@@YAXXZ
$pdata$?event_shared_push_data@@YAXU_mail_@@@Z DD imagerel $LN3
	DD	imagerel $LN3+285
	DD	imagerel $unwind$?event_shared_push_data@@YAXU_mail_@@@Z
pdata	ENDS
xdata	SEGMENT
$unwind$?initialize_event_shared@@YAXXZ DD 010401H
	DD	06204H
$unwind$?event_shared_push_data@@YAXU_mail_@@@Z DD 010901H
	DD	02209H
xdata	ENDS
; Function compile flags: /Odtp
; File e:\xeneva project\xeneva\aurora\aurora\ipc\evntsh.cpp
_TEXT	SEGMENT
data_$ = 0
data$ = 32
?event_shared_push_data@@YAXU_mail_@@@Z PROC		; event_shared_push_data

; 22   : void event_shared_push_data(mail_t data) {

$LN3:
	mov	QWORD PTR [rsp+8], rcx
	sub	rsp, 24

; 23   : 	uint64_t* data_ = (uint64_t*)0xFFFFD00000000000;

	mov	rax, -52776558133248			; ffffd00000000000H
	mov	QWORD PTR data_$[rsp], rax

; 24   : 	//!Prepare the message packet to transfer
; 25   : 	data_[1] = data.byte;  

	mov	rax, QWORD PTR data$[rsp]
	movzx	eax, BYTE PTR [rax]
	mov	ecx, 8
	imul	rcx, 1
	mov	rdx, QWORD PTR data_$[rsp]
	mov	QWORD PTR [rdx+rcx], rax

; 26   : 	data_[2] = data.byte2;

	mov	rax, QWORD PTR data$[rsp]
	movzx	eax, BYTE PTR [rax+1]
	mov	ecx, 8
	imul	rcx, 2
	mov	rdx, QWORD PTR data_$[rsp]
	mov	QWORD PTR [rdx+rcx], rax

; 27   : 	data_[3] = data.dword;

	mov	rax, QWORD PTR data$[rsp]
	mov	eax, DWORD PTR [rax+4]
	mov	ecx, 8
	imul	rcx, 3
	mov	rdx, QWORD PTR data_$[rsp]
	mov	QWORD PTR [rdx+rcx], rax

; 28   : 	data_[4] = data.dword2;

	mov	rax, QWORD PTR data$[rsp]
	mov	eax, DWORD PTR [rax+8]
	mov	ecx, 8
	imul	rcx, 4
	mov	rdx, QWORD PTR data_$[rsp]
	mov	QWORD PTR [rdx+rcx], rax

; 29   : 	data_[5] = data.quad;

	mov	eax, 8
	imul	rax, 5
	mov	rcx, QWORD PTR data_$[rsp]
	mov	rdx, QWORD PTR data$[rsp]
	mov	rdx, QWORD PTR [rdx+16]
	mov	QWORD PTR [rcx+rax], rdx

; 30   : 	data_[6] = data.quad2;

	mov	eax, 8
	imul	rax, 6
	mov	rcx, QWORD PTR data_$[rsp]
	mov	rdx, QWORD PTR data$[rsp]
	mov	rdx, QWORD PTR [rdx+24]
	mov	QWORD PTR [rcx+rax], rdx

; 31   : 	data_[7] = data.quad3;

	mov	eax, 8
	imul	rax, 7
	mov	rcx, QWORD PTR data_$[rsp]
	mov	rdx, QWORD PTR data$[rsp]
	mov	rdx, QWORD PTR [rdx+32]
	mov	QWORD PTR [rcx+rax], rdx

; 32   : 	data_[8] = data.quad4;

	mov	eax, 8
	imul	rax, 8
	mov	rcx, QWORD PTR data_$[rsp]
	mov	rdx, QWORD PTR data$[rsp]
	mov	rdx, QWORD PTR [rdx+40]
	mov	QWORD PTR [rcx+rax], rdx

; 33   : 	data_[9] = data.quad5;

	mov	eax, 8
	imul	rax, 9
	mov	rcx, QWORD PTR data_$[rsp]
	mov	rdx, QWORD PTR data$[rsp]
	mov	rdx, QWORD PTR [rdx+48]
	mov	QWORD PTR [rcx+rax], rdx

; 34   : 	data_[10] = data.quad6;

	mov	eax, 8
	imul	rax, 10
	mov	rcx, QWORD PTR data_$[rsp]
	mov	rdx, QWORD PTR data$[rsp]
	mov	rdx, QWORD PTR [rdx+56]
	mov	QWORD PTR [rcx+rax], rdx

; 35   : }

	add	rsp, 24
	ret	0
?event_shared_push_data@@YAXU_mail_@@@Z ENDP		; event_shared_push_data
_TEXT	ENDS
; Function compile flags: /Odtp
; File e:\xeneva project\xeneva\aurora\aurora\ipc\evntsh.cpp
_TEXT	SEGMENT
physical_frame$ = 32
?initialize_event_shared@@YAXXZ PROC			; initialize_event_shared

; 15   : void initialize_event_shared () {

$LN3:
	sub	rsp, 56					; 00000038H

; 16   : 	uint64_t *physical_frame = (uint64_t*)pmmngr_alloc();

	call	?pmmngr_alloc@@YAPEAXXZ			; pmmngr_alloc
	mov	QWORD PTR physical_frame$[rsp], rax

; 17   : 	map_page((uint64_t)physical_frame,0xFFFFD00000000000);

	mov	rdx, -52776558133248			; ffffd00000000000H
	mov	rcx, QWORD PTR physical_frame$[rsp]
	call	?map_page@@YA_N_K0@Z			; map_page

; 18   : 
; 19   : }

	add	rsp, 56					; 00000038H
	ret	0
?initialize_event_shared@@YAXXZ ENDP			; initialize_event_shared
_TEXT	ENDS
END
