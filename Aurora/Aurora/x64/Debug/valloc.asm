; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.1 

include listing.inc

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?valloc@@YAX_K@Z				; valloc
EXTRN	?pmmngr_alloc@@YAPEAXXZ:PROC			; pmmngr_alloc
EXTRN	x64_cli:PROC
EXTRN	?map_page@@YA_N_K0@Z:PROC			; map_page
pdata	SEGMENT
$pdata$?valloc@@YAX_K@Z DD imagerel $LN3
	DD	imagerel $LN3+37
	DD	imagerel $unwind$?valloc@@YAX_K@Z
pdata	ENDS
xdata	SEGMENT
$unwind$?valloc@@YAX_K@Z DD 010901H
	DD	04209H
xdata	ENDS
; Function compile flags: /Odtp
; File e:\xeneva project\xeneva\aurora\aurora\sysserv\valloc.cpp
_TEXT	SEGMENT
pos$ = 48
?valloc@@YAX_K@Z PROC					; valloc

; 5    : void valloc (uint64_t pos) {

$LN3:
	mov	QWORD PTR [rsp+8], rcx
	sub	rsp, 40					; 00000028H

; 6    : 	x64_cli();

	call	x64_cli

; 7    : 	map_page ((uint64_t)pmmngr_alloc(), pos);

	call	?pmmngr_alloc@@YAPEAXXZ			; pmmngr_alloc
	mov	rdx, QWORD PTR pos$[rsp]
	mov	rcx, rax
	call	?map_page@@YA_N_K0@Z			; map_page

; 8    : }

	add	rsp, 40					; 00000028H
	ret	0
?valloc@@YAX_K@Z ENDP					; valloc
_TEXT	ENDS
END
