; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.1 

include listing.inc

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?sys_set_mouse_data@@YAXXZ			; sys_set_mouse_data
PUBLIC	?sys_get_mouse_pack@@YA_NPEAU_mouse_packet_@@@Z	; sys_get_mouse_pack
PUBLIC	?sys_move_cursor@@YAXIII@Z			; sys_move_cursor
EXTRN	x64_cli:PROC
EXTRN	?svga_move_cursor@@YAXIIII@Z:PROC		; svga_move_cursor
EXTRN	?vmbackdoor_mouse_get_packet@@YA_NPEAU_mouse_packet_@@@Z:PROC ; vmbackdoor_mouse_get_packet
pdata	SEGMENT
$pdata$?sys_set_mouse_data@@YAXXZ DD imagerel $LN3
	DD	imagerel $LN3+14
	DD	imagerel $unwind$?sys_set_mouse_data@@YAXXZ
$pdata$?sys_get_mouse_pack@@YA_NPEAU_mouse_packet_@@@Z DD imagerel $LN3
	DD	imagerel $LN3+29
	DD	imagerel $unwind$?sys_get_mouse_pack@@YA_NPEAU_mouse_packet_@@@Z
$pdata$?sys_move_cursor@@YAXIII@Z DD imagerel $LN3
	DD	imagerel $LN3+51
	DD	imagerel $unwind$?sys_move_cursor@@YAXIII@Z
pdata	ENDS
xdata	SEGMENT
$unwind$?sys_set_mouse_data@@YAXXZ DD 010401H
	DD	04204H
$unwind$?sys_get_mouse_pack@@YA_NPEAU_mouse_packet_@@@Z DD 010901H
	DD	04209H
$unwind$?sys_move_cursor@@YAXIII@Z DD 011101H
	DD	04211H
xdata	ENDS
; Function compile flags: /Odtpy
; File e:\xeneva project\xeneva\aurora\aurora\sysserv\sysmouse.cpp
_TEXT	SEGMENT
visible$ = 48
x$ = 56
y$ = 64
?sys_move_cursor@@YAXIII@Z PROC				; sys_move_cursor

; 49   : void sys_move_cursor (uint32_t visible, uint32_t x,uint32_t y) {

$LN3:
	mov	DWORD PTR [rsp+24], r8d
	mov	DWORD PTR [rsp+16], edx
	mov	DWORD PTR [rsp+8], ecx
	sub	rsp, 40					; 00000028H

; 50   : 	x64_cli ();

	call	x64_cli

; 51   : 	svga_move_cursor (visible, x, y, SVGA_ID_INVALID);

	mov	r9d, -1					; ffffffffH
	mov	r8d, DWORD PTR y$[rsp]
	mov	edx, DWORD PTR x$[rsp]
	mov	ecx, DWORD PTR visible$[rsp]
	call	?svga_move_cursor@@YAXIIII@Z		; svga_move_cursor

; 52   : }

	add	rsp, 40					; 00000028H
	ret	0
?sys_move_cursor@@YAXIII@Z ENDP				; sys_move_cursor
_TEXT	ENDS
; Function compile flags: /Odtpy
; File e:\xeneva project\xeneva\aurora\aurora\sysserv\sysmouse.cpp
_TEXT	SEGMENT
pack$ = 48
?sys_get_mouse_pack@@YA_NPEAU_mouse_packet_@@@Z PROC	; sys_get_mouse_pack

; 43   : bool sys_get_mouse_pack (vm_mouse_packet *pack) {

$LN3:
	mov	QWORD PTR [rsp+8], rcx
	sub	rsp, 40					; 00000028H

; 44   : 	x64_cli();

	call	x64_cli

; 45   : 	return vmbackdoor_mouse_get_packet (pack);

	mov	rcx, QWORD PTR pack$[rsp]
	call	?vmbackdoor_mouse_get_packet@@YA_NPEAU_mouse_packet_@@@Z ; vmbackdoor_mouse_get_packet

; 46   : }

	add	rsp, 40					; 00000028H
	ret	0
?sys_get_mouse_pack@@YA_NPEAU_mouse_packet_@@@Z ENDP	; sys_get_mouse_pack
_TEXT	ENDS
; Function compile flags: /Odtpy
; File e:\xeneva project\xeneva\aurora\aurora\sysserv\sysmouse.cpp
_TEXT	SEGMENT
?sys_set_mouse_data@@YAXXZ PROC				; sys_set_mouse_data

; 21   : void sys_set_mouse_data () {

$LN3:
	sub	rsp, 40					; 00000028H

; 22   : 	x64_cli();

	call	x64_cli

; 23   : 	/*
; 24   : 	SVGAFifoCmdDefineAlphaCursor  cursor;
; 25   : 	cursor.id = 0;
; 26   : 	cursor.hotspotX = 1;
; 27   : 	cursor.hotspotY = 1;
; 28   : 	cursor.width = 36;
; 29   : 	cursor.height = 51;
; 30   : 
; 31   : 
; 32   : 
; 33   : 	void *fifo_data = pmmngr_alloc();
; 34   : 
; 35   : 	svga_write_reg (SVGA_REG_BITS_PER_PIXEL, 8);
; 36   : 	svga_begin_define_alpha_cursor (&cursor, &fifo_data);
; 37   : 	memcpy (fifo_data,(void*)mouse_data, sizeof(mouse_data));
; 38   : 	svga_fifo_commit_all();*/
; 39   : 
; 40   : 	//svga_move_cursor (true,0, 0, SVGA_ID_INVALID);
; 41   : }

	add	rsp, 40					; 00000028H
	ret	0
?sys_set_mouse_data@@YAXXZ ENDP				; sys_set_mouse_data
_TEXT	ENDS
END
