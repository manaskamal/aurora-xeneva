; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.1 

include listing.inc

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?root_pipe@@3PEAU_pipe_@@EA			; root_pipe
_BSS	SEGMENT
?root_pipe@@3PEAU_pipe_@@EA DQ 01H DUP (?)		; root_pipe
_BSS	ENDS
PUBLIC	?pipe_write@@YAXXZ				; pipe_write
PUBLIC	?pipe_read@@YAXPEAU_file_@@PEAEH@Z		; pipe_read
PUBLIC	?init_pipe@@YAXXZ				; init_pipe
EXTRN	?circ_buf_init@@YAPEAU_circ_buf_@@PEAD_K@Z:PROC	; circ_buf_init
EXTRN	?pmmngr_alloc@@YAPEAXXZ:PROC			; pmmngr_alloc
EXTRN	?malloc@@YAPEAXI@Z:PROC				; malloc
pdata	SEGMENT
$pdata$?init_pipe@@YAXXZ DD imagerel $LN3
	DD	imagerel $LN3+89
	DD	imagerel $unwind$?init_pipe@@YAXXZ
pdata	ENDS
xdata	SEGMENT
$unwind$?init_pipe@@YAXXZ DD 010401H
	DD	06204H
xdata	ENDS
; Function compile flags: /Odtpy
; File e:\xeneva project\xeneva\aurora\aurora\utils\pipe.cpp
_TEXT	SEGMENT
buf$ = 32
?init_pipe@@YAXXZ PROC					; init_pipe

; 23   : void init_pipe () {

$LN3:
	sub	rsp, 56					; 00000038H

; 24   : 	root_pipe = (pipe_t*)malloc(sizeof(pipe_t));

	mov	ecx, 16
	call	?malloc@@YAPEAXI@Z			; malloc
	mov	QWORD PTR ?root_pipe@@3PEAU_pipe_@@EA, rax ; root_pipe

; 25   : 	char* buf = (char*)pmmngr_alloc();

	call	?pmmngr_alloc@@YAPEAXXZ			; pmmngr_alloc
	mov	QWORD PTR buf$[rsp], rax

; 26   : 	root_pipe->buf= circ_buf_init(buf,4096);

	mov	edx, 4096				; 00001000H
	mov	rcx, QWORD PTR buf$[rsp]
	call	?circ_buf_init@@YAPEAU_circ_buf_@@PEAD_K@Z ; circ_buf_init
	mov	rcx, QWORD PTR ?root_pipe@@3PEAU_pipe_@@EA ; root_pipe
	mov	QWORD PTR [rcx], rax

; 27   : 	root_pipe->readers = 0;

	mov	rax, QWORD PTR ?root_pipe@@3PEAU_pipe_@@EA ; root_pipe
	mov	DWORD PTR [rax+8], 0

; 28   : 	root_pipe->writers = 0;

	mov	rax, QWORD PTR ?root_pipe@@3PEAU_pipe_@@EA ; root_pipe
	mov	DWORD PTR [rax+12], 0

; 29   : }

	add	rsp, 56					; 00000038H
	ret	0
?init_pipe@@YAXXZ ENDP					; init_pipe
_TEXT	ENDS
; Function compile flags: /Odtpy
; File e:\xeneva project\xeneva\aurora\aurora\utils\pipe.cpp
_TEXT	SEGMENT
pfile$ = 8
buffer$ = 16
length$ = 24
?pipe_read@@YAXPEAU_file_@@PEAEH@Z PROC			; pipe_read

; 20   : void pipe_read (FILE* pfile, unsigned char * buffer, int length) {

	mov	DWORD PTR [rsp+24], r8d
	mov	QWORD PTR [rsp+16], rdx
	mov	QWORD PTR [rsp+8], rcx

; 21   : }

	ret	0
?pipe_read@@YAXPEAU_file_@@PEAEH@Z ENDP			; pipe_read
_TEXT	ENDS
; Function compile flags: /Odtpy
; File e:\xeneva project\xeneva\aurora\aurora\utils\pipe.cpp
_TEXT	SEGMENT
?pipe_write@@YAXXZ PROC					; pipe_write

; 18   : }

	ret	0
?pipe_write@@YAXXZ ENDP					; pipe_write
_TEXT	ENDS
END
